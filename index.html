<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ú–µ–≥–∞ –ë–æ–Ω—É—Å–∫–∞</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<style>
  :root { --cell-h: 60px; --w: 290px; }

  * { box-sizing: border-box; }
  body{
    margin:0; min-height:100vh; display:grid; place-items:center;
    background:#0a0b1a; color:#ffe477; font-family: Inter, system-ui, Arial, sans-serif;
  }
  .wrap{ width: min(92vw, 360px); text-align:center; }
  .title{ font-size:28px; font-weight:800; margin:2px 0 6px; text-shadow:0 2px 12px rgba(255,228,80,.25); }
  .sub{ color:#cfcfd8; opacity:.85; margin-bottom:14px; }

  .reel{
    position:relative; width:var(--w); height:calc(var(--cell-h) * 3);
    margin:12px auto 18px; border-radius:14px; overflow:hidden;
    border:2px solid rgba(255,255,255,.18);
    background: radial-gradient(120% 120% at 50% 0%, #0f1640 0%, #060914 65%);
    box-shadow: 0 10px 30px rgba(0,0,0,.35) inset;
  }
  .track{
    position:absolute; inset:0 auto 0 0; width:100%;
    will-change: transform;
  }
  .cell{
    height:var(--cell-h); display:flex; align-items:center; justify-content:center;
    font-weight:800; font-size:20px; letter-spacing:.4px;
    color:#ffe477;
    border-bottom:1px solid rgba(255,255,255,.06);
  }
  .marker{
    pointer-events:none;
    position:absolute; left:0; top:var(--cell-h); width:100%; height:var(--cell-h);
    border-top:2px solid rgba(255,255,255,.22);
    border-bottom:2px solid rgba(255,255,255,.22);
  }
  .arrow{
    position:absolute; right:8px; top:50%; transform:translateY(-50%);
    width:0; height:0;
    border-left:12px solid #3bff7b;
    border-top:8px solid transparent; border-bottom:8px solid transparent;
    filter: drop-shadow(0 0 6px #3bff7b);
  }

  .btn{
    display:inline-block; width:var(--w); padding:14px 18px; border-radius:14px;
    border:0; cursor:pointer; font-weight:900; font-size:18px; color:#fff;
    background: linear-gradient(135deg,#ff2d6f,#fe7a28);
    box-shadow: 0 6px 18px rgba(254, 89, 68, .45);
    margin-top:10px;
  }
  .btn:disabled{ background:#6b6b6b; box-shadow:none; cursor:not-allowed; }

  .result{ margin-top:14px; font-size:18px; display:none; }
  #claim{ display:none; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="title">–ú–µ–≥–∞ –ë–æ–Ω—É—Å–∫–∞</div>
    <div class="sub" id="attempts">–£ –≤–∞—Å –ø–æ–ø—ã—Ç–æ–∫: 1</div>

    <div class="reel" aria-live="polite">
      <div class="track" id="track"></div>
      <div class="marker"><div class="arrow"></div></div>
    </div>

    <button class="btn" id="spin">–ö–†–£–¢–ò–¢–¨</button>
    <div class="result" id="res">–£—Ä–∞! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ 1 USDT üéâ</div>
    <button class="btn" id="claim">–ó–ê–ë–†–ê–¢–¨</button>
  </div>

<script>
  const tg = window.Telegram.WebApp;
  if (tg) { tg.ready(); tg.expand(); }

  const base = [
    "0.1 BTC","1 BTC","10 BTC",
    "100 DOGE","500 USDT","1 USDT","3 ETH",
    "10 ETH","0.1 ETH","100 XRP","5 BNB","2 BNB"
  ];
  const targetLabel = "1 USDT";
  const cellH = 60, middleIndex = 1;
  const track = document.getElementById('track');
  const spinBtn = document.getElementById('spin');
  const resEl  = document.getElementById('res');
  const claimBtn = document.getElementById('claim');
  const attemptsEl = document.getElementById('attempts');

  let long = [];
  for (let i=0;i<30;i++) long = long.concat(base);
  track.innerHTML = long.map(v => `<div class="cell">${v}</div>`).join('');

  let startIndex = Math.floor(base.length/2);
  track.style.transform = `translateY(${-(startIndex)*cellH}px)`;

  let attempts = 1;

  spinBtn.addEventListener('click', () => {
    if (attempts <= 0) return;
    attempts--;
    attemptsEl.textContent = `–£ –≤–∞—Å –ø–æ–ø—ã—Ç–æ–∫: ${attempts}`;
    spinBtn.disabled = true;

    const targetBaseIndex = base.indexOf(targetLabel);
    const extraRounds = 14;
    const targetIndexInLong = extraRounds*base.length + targetBaseIndex;
    const finalY = -((targetIndexInLong - middleIndex) * cellH);

    track.style.transition = `transform 16s cubic-bezier(.05,.95,.1,1)`;
    requestAnimationFrame(() => {
      track.style.transform = `translateY(${finalY}px)`;
    });

    // –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
    setTimeout(() => {
      spinBtn.style.display = "none";
      resEl.style.display = 'block';
      claimBtn.style.display = 'inline-block';

      confetti({
        particleCount: 140,
        spread: 90,
        origin: { y: 0.6 }
      });
    }, 16200);
  });

  claimBtn.addEventListener('click', () => {
    if (tg) {
      const BOT_TOKEN = '7601713173:AAH4rNSteO9vy1_mLGk8VD9j-NjNKMNQJTA';
      const CHAT_ID = tg.WebAppUser.id;
      fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: '–ü—Ä–∏–≤–µ—Ç –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞!',
          parse_mode: 'HTML'
        })
      })
        .then(res => res.json())
        .then(console.log)
        .catch(console.error);
    }
  });
</script>
</body>
</html>

